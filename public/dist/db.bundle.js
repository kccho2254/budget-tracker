(()=>{let e;const n=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB).open("budget",1);function t(){const n=e.transaction(["pending"],"readwrite").objectStore("pending").getAll();n.onsuccess=function(){n.result.length>0&&fetch("/api/transaction/bulk",{method:"POST",body:JSON.stringify(n.result),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((e=>e.json())).then((()=>{e.transaction(["pending"],"readwrite").objectStore("pending").clear()}))}}n.onupgradeneeded=({target:e})=>{e.result.createObjectStore("pending",{autoIncrement:!0})},n.onsuccess=({target:n})=>{e=n.result,navigator.onLine&&t()},n.onerror=function(e){console.log("Woops! "+e.target.errorCode)},window.addEventListener("online",t)})();